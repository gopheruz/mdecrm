<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    {% block links %}
    {% include 'components/_links.html' %}
    {% endblock links %}

    <title>
        {% block title %}

        {% endblock title %}
    </title>
</head>
<body>

<header>

<nav class="navbar navbar-expand-lg bg-secondary navbar-dark shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="{% url 'index_url' %}">
            <i class="bi bi-heart-pulse-fill me-2"></i>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active fw-bold" aria-current="page" href="{% url 'index_url' %}">
                        <i class="bi bi-house-door-fill me-1"></i>
                        –ì–ª–∞–≤–Ω–∞—è
                    </a>
                </li>
                {% if request.user.is_authenticated and request.user.is_staff %}
                <li class="nav-item">
                    <a class="nav-link active fw-bold" aria-current="page"
                       href="{% url 'operator_report_url' %}">
                        <i class="bi bi-house-door-fill me-1"></i>
                        –û—Ç—á–µ—Ç—ã
                    </a>
                </li>
                <li class="nav-item">
                    <button class="nav-link active fw-bold" data-bs-toggle="modal" data-bs-target="#exportModal">
                        üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel 
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link active fw-bold" data-bs-toggle="modal" data-bs-target="#exportZvonokModal">
                        üìû –≠–∫—Å–ø–æ—Ä—Ç –∑–≤–æ–Ω–∫–æ–≤
                    </button>
                </li>

                <li class="nav-item">
                    <a class="nav-link active fw-bold" aria-current="page"
                       href="{% url 'analytics_url' %}">
                        <i class="bi bi-house-door-fill me-1"></i>
                        –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
                    </a>
                </li>

                {% endif %}

            </ul>

            <ul class="navbar-nav ms-auto mb-2 mb-lg-0"> {# ms-auto –ø—Ä–∏–∂–∏–º–∞–µ—Ç —ç—Ç—É —á–∞—Å—Ç—å –≤–ø—Ä–∞–≤–æ #}

                {% if request.user.is_authenticated %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle fw-bold" href="#" role="button" data-bs-toggle="dropdown"
                           aria-expanded="false">
                            <i class="bi bi-person-circle me-1"></i>Hello, {{ request.user.username }}!
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">

                            <li>
                                <a class="dropdown-item fw-bold" href="{% url 'logout_url' %}">
                                    <i class="bi bi-box-arrow-right me-2"></i>Sign out
                                </a>
                            </li>
                        </ul>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link active fw-bold" aria-current="page" href="{% url 'login_url' %}">
                             <i class="bi bi-box-arrow-in-right me-1"></i>OPERATOR LOG IN
                        </a>
                    </li>
                {% endif %}


                <li class="nav-item">
                    <a class="nav-link active fw-bold" aria-current="page" href="/admin" target="_blank"> {# target="_blank" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ #}
                         <i class="bi bi-shield-lock-fill me-1"></i>ADMIN LOG IN
                    </a>
                </li>
            </ul>

        </div>
    </div>
</nav>

<div class="modal fade" id="exportModal" tabindex="-1" aria-labelledby="exportModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form method="GET" action="{% url 'export_excel_url' %}">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exportModalLabel">Excel eksporti uchun sanalarni tanlang</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Yopish"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="start_date" class="form-label">Boshlanish sanasi</label>
                    <input type="date" class="form-control" name="start_date" required>
                </div>
                <div class="mb-3">
                    <label for="end_date" class="form-label">Tugash sanasi</label>
                    <input type="date" class="form-control" name="end_date" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Yuklab olish</button>
            </div>
        </div>
    </form>
  </div>
</div>
<div class="modal fade" id="exportZvonokModal" tabindex="-1" aria-labelledby="exportZvonokModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form method="GET" action="{% url 'export_excel_zvonok_url' %}">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exportZvonokModalLabel">Zvonok Excel eksporti uchun sanalarni tanlang</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Yopish"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="start_date_zvonok" class="form-label">Boshlanish sanasi</label>
                    <input type="date" class="form-control" name="start_date" required>
                </div>
                <div class="mb-3">
                    <label for="end_date_zvonok" class="form-label">Tugash sanasi</label>
                    <input type="date" class="form-control" name="end_date" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Yuklab olish</button>
            </div>
        </div>
    </form>
  </div>
</div>


</header>

<main>
    <div class="container mt-3 mb-3 rounded">
        {% include 'components/_messages.html' %}
    </div>

    {% block main %}

    {% endblock main %}
</main>

<footer>

</footer>


{% block scripts %}
{% include 'components/_scripts.html' %}
{% endblock scripts %}

</body>
</html>